<template>
  <div class="exploitation-result" :class="`exploitation-result--${data.status}`">
    <div class="header">
      <span class="icon">{{ data.status === 'success' ? '✅' : '❌' }}</span>
      <h5 class="title">Результат эксплуатации</h5>
    </div>
    <div class="body">
      <div v-if="data.status === 'success'">
        <p><strong>Статус:</strong> Успешно!</p>
        <p><strong>Получена сессия ID:</strong> <span class="session-id">{{ data.session_id }}</span></p>
        <pre v-if="data.session_info">{{ JSON.stringify(data.session_info, null, 2) }}</pre>
      </div>
      <div v-else>
        <p><strong>Статус:</strong> Неудача</p>
        <p><strong>Сообщение:</strong> {{ data.message }}</p>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
interface Props {
  data: {
    status: 'success' | 'failure' | 'error';
    session_id?: number;
    session_info?: any;
    message?: string;
  };
}
defineProps<Props>();
</script>

<style scoped>
.exploitation-result { border-radius: 8px; margin: 12px 0; border-left-width: 4px; border-style: solid; }
.header { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border-bottom: 1px solid; }
.icon { font-size: 18px; }
.title { margin: 0; font-weight: 600; }
.body { padding: 12px; }
.body p { margin: 0 0 8px 0; }
.session-id { font-weight: bold; background-color: #e0e7ff; padding: 2px 6px; border-radius: 4px; }
pre { background-color: #f3f4f6; padding: 8px; border-radius: 4px; font-size: 12px; white-space: pre-wrap; }

.exploitation-result--success { border-color: #10b981; background-color: #f0fdf4; }
.exploitation-result--success .header { border-bottom-color: #d1fae5; color: #065f46; }
.exploitation-result--failure, .exploitation-result--error { border-color: #ef4444; background-color: #fef2f2; }
.exploitation-result--failure .header, .exploitation-result--error .header { border-bottom-color: #fee2e2; color: #991b1b; }
</style>